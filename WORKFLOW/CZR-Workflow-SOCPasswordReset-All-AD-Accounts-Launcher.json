{
  "id": "f937e33f-909b-4dbb-b6d4-d080ed50b12a",
  "name": "CZR-Workflow-SOCPasswordReset-All-AD-Accounts-Launcher",
  "description": "SOC uses this launcher to scramble password for the selected User",
  "created": "2025-11-17T20:19:56.654815521Z",
  "modified": "2025-12-14T01:35:14.553210445Z",
  "modifiedBy": {
    "type": "IDENTITY",
    "id": "a0d9586ce9314f9f89c2d094dca4e27e",
    "name": "500000384"
  },
  "definition": {
    "start": "Interactive Form",
    "steps": {
      "Compare Boolean": {
        "actionId": "sp:compare-boolean",
        "choiceList": [
          {
            "comparator": "BooleanEquals",
            "nextStep": "Loop",
            "variableA.$": "$.interactiveForm1.formData.passwordResetAdAccount",
            "variableB": true
          }
        ],
        "defaultStep": "End Step - Failure",
        "displayName": "PasswordReset Request ?",
        "type": "choice"
      },
      "Define Variable": {
        "actionId": "sp:define-variable",
        "attributes": {
          "id": "sp:define-variable",
          "variables": [
            {
              "description": "",
              "name": "selectedUserPersonId",
              "transforms": [
                {
                  "id": "sp:transform:replace:string",
                  "input": {
                    "pattern": "^.*-",
                    "replacement": " "
                  }
                },
                {
                  "id": "sp:transform:trim:string",
                  "input": {
                    "postfix": true,
                    "prefix": true
                  }
                }
              ],
              "variableA.$": "$.interactiveForm.formData.selectUser"
            }
          ]
        },
        "displayName": "",
        "nextStep": "HTTP Request",
        "type": "Mutation"
      },
      "Define Variable 1": {
        "actionId": "sp:define-variable",
        "attributes": {
          "id": "sp:define-variable",
          "variables": [
            {
              "description": "",
              "name": "selectedUserID",
              "transforms": [],
              "variableA.$": "$.hTTPRequest.body[0].id"
            }
          ]
        },
        "displayName": "",
        "nextStep": "Define Variable 2",
        "type": "Mutation"
      },
      "Define Variable 2": {
        "actionId": "sp:define-variable",
        "attributes": {
          "id": "sp:define-variable",
          "variables": [
            {
              "description": "",
              "name": "adAccountsURL",
              "transforms": [
                {
                  "id": "sp:transform:replace:string",
                  "input": {
                    "pattern": "identity_id",
                    "replacement.$": "$.defineVariable1.selectedUserID"
                  }
                },
                {
                  "id": "sp:transform:replace:string",
                  "input": {
                    "pattern": "source_Type",
                    "replacement": "Direct"
                  }
                }
              ],
              "variableA": "https://caesars-sb.api.identitynow.com/v2025/accounts?filters=identityId eq \"identity_id\" and source.connectionType eq \"source_Type\""
            }
          ]
        },
        "displayName": "",
        "nextStep": "HTTP Request 1",
        "type": "Mutation"
      },
      "End Step - Failure": {
        "actionId": "sp:operator-failure",
        "displayName": "",
        "failureName": "No Matching Requests",
        "type": "failure"
      },
      "End Step - Success 1": {
        "actionId": "sp:operator-success",
        "displayName": "",
        "type": "success"
      },
      "HTTP Request": {
        "actionId": "sp:http",
        "attributes": {
          "authenticationType": "OAuth",
          "jsonRequestBody": {
            "indices": [
              "identities"
            ],
            "query": {
              "query": "attributes.uid:{{$.defineVariable.selectedUserPersonId}}"
            }
          },
          "method": "post",
          "oAuthClientId": "04e17c484bd8428f8dfad8d96557f3a9",
          "oAuthClientSecret": "$.secrets.1bce0ac6-18db-485a-b6cc-85184274d04d",
          "oAuthCredentialLocation": null,
          "oAuthTokenUrl": "https://caesars-sb.api.identitynow.com/oauth/token",
          "requestContentType": "json",
          "url": "https://caesars-sb.api.identitynow.com/v2025/search"
        },
        "displayName": "",
        "nextStep": "Define Variable 1",
        "type": "action",
        "versionNumber": 2
      },
      "HTTP Request 1": {
        "actionId": "sp:http",
        "attributes": {
          "authenticationType": "OAuth",
          "method": "get",
          "oAuthClientId": "04e17c484bd8428f8dfad8d96557f3a9",
          "oAuthClientSecret": "$.secrets.b48c1c00-8d58-413c-8743-1301e6de1c15",
          "oAuthCredentialLocation": null,
          "oAuthTokenUrl": "https://caesars-sb.api.identitynow.com/oauth/token",
          "url.$": "$.defineVariable2.adAccountsURL",
          "urlParams": {
            "filters": "identityId eq \"{{$.defineVariable1.selectedUserID}}\" and source.connectionType eq \"Direct\""
          }
        },
        "displayName": "",
        "nextStep": "Interactive Form 1",
        "type": "action",
        "versionNumber": 2
      },
      "Interactive Form": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "6bbfdbf7-5637-4912-b9aa-f608b75a1d06",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "User Selection Form"
        },
        "displayName": "",
        "nextStep": "Define Variable",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Form 1": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "ea006cee-4783-4a52-843c-8496fd1d9453",
          "inputForForm_array_adAccounts.$": "$.hTTPRequest1.body[?(@.sourceName =~ /.*ActiveDirectory.*/)]",
          "inputForForm_array_adAccounts_label": "$.sourceName",
          "inputForForm_array_adAccounts_value": "$.sourceName",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Active Directory Accounts"
        },
        "displayName": "",
        "nextStep": "Compare Boolean",
        "type": "action",
        "versionNumber": 1
      },
      "Loop": {
        "actionId": "sp:loop:iterator",
        "attributes": {
          "context.$": "$.defineVariable1.selectedUserID",
          "input.$": "$.interactiveForm1.formData.selectAdAccounts",
          "start": "Define Variable 3",
          "steps": {
            "Compare Strings": {
              "actionId": "sp:compare-strings",
              "choiceList": [
                {
                  "comparator": "StringEquals",
                  "nextStep": "Get Access",
                  "variableA.$": "$.defineVariable3.selectedAccount",
                  "variableB": "CZR-Application-ActiveDirectory-Harrahs"
                }
              ],
              "defaultStep": "Compare Strings 1",
              "displayName": "",
              "type": "choice"
            },
            "Compare Strings 1": {
              "actionId": "sp:compare-strings",
              "choiceList": [
                {
                  "comparator": "StringEquals",
                  "nextStep": "Get Access 1",
                  "variableA.$": "$.defineVariable3.selectedAccount",
                  "variableB": "CZR-Application-ActiveDirectory-Harrahs-JAccounts"
                }
              ],
              "defaultStep": "Compare Strings 2",
              "displayName": "",
              "type": "choice"
            },
            "Compare Strings 2": {
              "actionId": "sp:compare-strings",
              "choiceList": [
                {
                  "comparator": "StringEquals",
                  "nextStep": "Get Access 2",
                  "variableA.$": "$.defineVariable3.selectedAccount",
                  "variableB": "CZR-Application-ActiveDirectory-WilliamHill"
                }
              ],
              "defaultStep": "End Step - Failure 1",
              "displayName": "",
              "type": "choice"
            },
            "Define Variable 3": {
              "actionId": "sp:define-variable",
              "attributes": {
                "id": "sp:define-variable",
                "variables": [
                  {
                    "description": "",
                    "name": "selectedAccount",
                    "transforms": [],
                    "variableA.$": "$.loop.loopInput"
                  }
                ]
              },
              "displayName": "",
              "nextStep": "Define Variable 4",
              "type": "Mutation"
            },
            "Define Variable 4": {
              "actionId": "sp:define-variable",
              "attributes": {
                "id": "sp:define-variable",
                "variables": [
                  {
                    "description": "",
                    "name": "IdentityUID",
                    "transforms": [],
                    "variableA.$": "$.loop.context"
                  }
                ]
              },
              "displayName": "",
              "nextStep": "Compare Strings",
              "type": "Mutation"
            },
            "End Step - Failure 1": {
              "actionId": "sp:operator-failure",
              "displayName": "",
              "failureName": "No Matching Criterias",
              "type": "failure"
            },
            "End Step - Failure 2": {
              "actionId": "sp:operator-failure",
              "displayName": "",
              "failureName": "Null Values",
              "type": "failure"
            },
            "End Step - Success": {
              "actionId": "sp:operator-success",
              "displayName": "",
              "type": "success"
            },
            "End Step - Success 2": {
              "actionId": "sp:operator-success",
              "displayName": "",
              "type": "success"
            },
            "End Step - Success 3": {
              "actionId": "sp:operator-success",
              "displayName": "",
              "type": "success"
            },
            "Get Access": {
              "actionId": "sp:access:get",
              "attributes": {
                "accessprofiles": false,
                "entitlements": true,
                "getAccessBy": "searchQuery",
                "query": "attributes.name.exact eq \"CN=SOCPasswordReset,OU=Groups,OU=SailPointUsers,DC=dev,DC=lab,DC=local\" && source.id:\"e30d0436a20b45b79517a08f0380b1b1\"",
                "roles": false
              },
              "displayName": "",
              "nextStep": "Verify Data Type",
              "type": "action",
              "versionNumber": 1
            },
            "Get Access 1": {
              "actionId": "sp:access:get",
              "attributes": {
                "accessprofiles": false,
                "entitlements": true,
                "getAccessBy": "searchQuery",
                "query": "attributes.name.exact eq \"CN=SOCPasswordReset,OU=Groups,OU=SailPointUsers,DC=dev,DC=lab,DC=local\" && source.id:\"7de09998939547699404eecea625ad91\"",
                "roles": false
              },
              "displayName": "",
              "nextStep": "Manage Access 1",
              "type": "action",
              "versionNumber": 1
            },
            "Get Access 2": {
              "actionId": "sp:access:get",
              "attributes": {
                "accessprofiles": false,
                "entitlements": true,
                "getAccessBy": "searchQuery",
                "query": "attributes.name.exact eq \"CN=SOCPasswordReset,OU=Groups,OU=SailPointUsers,DC=dev,DC=lab,DC=local\" && source.id:\"4f4839d8993144e3b1c0b1af7a2fd110\"",
                "roles": false
              },
              "displayName": "",
              "nextStep": "Manage Access 2",
              "type": "action",
              "versionNumber": 1
            },
            "Manage Access": {
              "actionId": "sp:access:manage",
              "attributes": {
                "addIdentities.$": "$.defineVariable4.identityUID",
                "comments": "Scamble Active Directory Harrahs Password",
                "requestType": "GRANT_ACCESS",
                "requestedItems.$": "$.getAccess.accessItems"
              },
              "displayName": "",
              "nextStep": "End Step - Success",
              "type": "action",
              "versionNumber": 1
            },
            "Manage Access 1": {
              "actionId": "sp:access:manage",
              "attributes": {
                "addIdentities.$": "$.defineVariable4.identityUID",
                "comments": "Scramble Active Directory JAccount Password",
                "requestType": "GRANT_ACCESS",
                "requestedItems.$": "$.getAccess1.accessItems"
              },
              "displayName": "",
              "nextStep": "End Step - Success 2",
              "type": "action",
              "versionNumber": 1
            },
            "Manage Access 2": {
              "actionId": "sp:access:manage",
              "attributes": {
                "addIdentities.$": "$.defineVariable4.identityUID",
                "comments": "Scramble Active Directory WilliamHill Password",
                "requestType": "GRANT_ACCESS",
                "requestedItems.$": "$.getAccess2.accessItems"
              },
              "displayName": "",
              "nextStep": "End Step - Success 3",
              "type": "action",
              "versionNumber": 1
            },
            "Verify Data Type": {
              "actionId": "sp:compare-unary",
              "choiceList": [
                {
                  "comparator": "IsString",
                  "nextStep": "Verify Data Type 1",
                  "variableA.$": "$.defineVariable4.identityUID"
                }
              ],
              "defaultStep": "End Step - Failure 2",
              "displayName": "",
              "type": "choice"
            },
            "Verify Data Type 1": {
              "actionId": "sp:compare-unary",
              "choiceList": [
                {
                  "comparator": "IsPresent",
                  "nextStep": "Manage Access",
                  "variableA.$": "$.getAccess.accessItems"
                }
              ],
              "defaultStep": "End Step - Failure 2",
              "displayName": "",
              "type": "choice"
            }
          }
        },
        "displayName": "",
        "nextStep": "End Step - Success 1",
        "type": "action",
        "versionNumber": 1
      }
    }
  },
  "enabled": false,
  "creator": {
    "type": "IDENTITY",
    "id": "a59de7c458b8412196819de652475e5a",
    "name": "500000383"
  },
  "owner": {
    "type": "IDENTITY",
    "id": "a0d9586ce9314f9f89c2d094dca4e27e",
    "name": "500000384"
  },
  "trigger": {
    "type": "EVENT",
    "attributes": {
      "filter.$": "$[?(@.workflowId == 'f937e33f-909b-4dbb-b6d4-d080ed50b12a')]",
      "id": "idn:interactive-process-launched"
    }
  }
}