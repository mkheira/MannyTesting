{
  "id": "510a8503-8269-405c-9f58-e3cd457970b8",
  "name": "Richard: Create a New User in Active Directory",
  "description": "This interactive workflow creates a new Active Directory User.\n\nYou will be asked to provide some User details using an interactive form.",
  "created": "2025-11-19T20:45:57.274488063Z",
  "modified": "2025-12-09T17:31:15.963739448Z",
  "modifiedBy": {
    "type": "IDENTITY",
    "id": "01e5dd6aee9945f89dd5544f4f683f74",
    "name": "800761288"
  },
  "definition": {
    "start": "Interactive Form 3",
    "steps": {
      "Active Directory": {
        "actionId": "sp:pag-active-directory",
        "attributes": {
          "inputForPag_limit": 100,
          "inputForPag_port": 636,
          "inputForPag_search_base_dn": "OU=Users,OU=Caesars Palace Las Vegas,OU=SailPointUsers,DC=dev,DC=lab,DC=local",
          "inputForPag_search_scope": "Subtree",
          "inputForPag_verify_cert": false,
          "pagCommandType": "",
          "pagInstanceId": "",
          "pagSpecId": "",
          "param_conn": {
            "mapping": {
              "address": "domainControllers",
              "domain": "domainFQDN",
              "port": "ldapsPort"
            },
            "paramID": "a5cfcf00-f000-4024-82c7-9838983d2e65",
            "paramType": "2.1",
            "refID": "c29945a3-0e81-489a-8e09-ca3b2022e157"
          },
          "param_connType": "paramSPS",
          "param_credential": {
            "mapping": {
              "auth_password": "password",
              "auth_username": "username"
            },
            "paramID": "df3632ec-4476-4d7b-98d6-5527e1db8d2f",
            "paramType": "1.1",
            "refID": "3b58fd2b-ba03-4dc9-b738-714ce9163c11"
          },
          "param_credentialType": "paramSPS"
        },
        "catch": [
          {
            "next": "Interactive Message 16"
          }
        ],
        "description": "The Privileged Action Gateway retrieves organizational units from Active Directory.\nThe directory location to search in and the depth of the search can be controlled using the Search Base DN and Search Scope inputs.",
        "displayName": "PAG: Get Organizational Units",
        "nextStep": "Compare Numbers",
        "type": "action",
        "versionNumber": 1
      },
      "Active Directory 1": {
        "actionId": "sp:pag-active-directory",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 4"
          }
        ],
        "description": "The Privileged Action Gateway creates the new group using the details provided in the New Group Details interactive form.",
        "displayName": "PAG: Create Group",
        "nextStep": "Interactive Message 12",
        "type": "action",
        "versionNumber": 1
      },
      "Active Directory 3": {
        "actionId": "sp:pag-active-directory",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 8"
          }
        ],
        "description": "The Privileged Action Gateway searches for groups in Active Directory with the same name as the one provided in the interactive form.",
        "displayName": "PAG: Find Duplicate Groups",
        "nextStep": "Compare Numbers 1",
        "type": "action",
        "versionNumber": 1
      },
      "Active Directory 4": {
        "actionId": "sp:pag-active-directory",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 11"
          }
        ],
        "description": "The Privileged Action Gateway searches for the provided manager in Active Directory.\n\nThe manager is provided as an Identity Security Cloud identity, but the workflow needs the Active Directory account belonging to that identity to set them as the group's manager.",
        "displayName": "PAG: Find Manager",
        "nextStep": "Interactive Message",
        "type": "action",
        "versionNumber": 1
      },
      "Active Directory 5": {
        "actionId": "sp:pag-active-directory",
        "attributes": {},
        "catch": [
          {
            "next": "Interactive Message 13"
          }
        ],
        "description": "The Privileged Action Gateway sets the group's manager in Active Directory.",
        "displayName": "PAG: Set Group Manager",
        "nextStep": "Verify Data Type 5",
        "type": "action",
        "versionNumber": 1
      },
      "Compare Numbers": {
        "actionId": "sp:compare-numbers",
        "choiceList": [
          {
            "comparator": "NumericGreaterThan",
            "nextStep": "Interactive Form",
            "variableA.$": "$.activeDirectory.result.count",
            "variableB": 0
          }
        ],
        "defaultStep": "Interactive Message 15",
        "description": "The search results are evaluated to determine if any organizational units were found in Active Directory. If one or more organizational units are found, it evaluates to True, otherwise False.",
        "displayName": "Organizational Units Found?",
        "type": "choice"
      },
      "Compare Numbers 1": {
        "actionId": "sp:compare-numbers",
        "choiceList": [
          {
            "comparator": "NumericEquals",
            "nextStep": "Interactive Message 6",
            "variableA.$": "$.activeDirectory3.result.count",
            "variableB": 0
          }
        ],
        "defaultStep": "Interactive Message 9",
        "description": "The provided group name is evaluated to determine if the name is available. If the group name is available, it evaluates to True, otherwise False.",
        "displayName": "Group Name Available?",
        "type": "choice"
      },
      "End Step - Failure": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as the group was not created. The workflow ends in a failed state.",
        "displayName": "Failure: Create Group Failed",
        "failureName": "Create Group Failed",
        "type": "failure"
      },
      "End Step - Failure 1": {
        "actionId": "sp:operator-failure",
        "description": "The workflow could not continue as the provided manager does not have an account in Active Directory. The workflow ends in a failed state.",
        "displayName": "Failure: Manager Not Found",
        "failureName": "Manager Not Found",
        "type": "failure"
      },
      "End Step - Failure 2": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as a command error occurred while searching for groups. The workflow ends in a failed state.",
        "displayName": "Failure: Find Duplicate Groups",
        "failureName": "No Groups Found",
        "type": "failure"
      },
      "End Step - Failure 3": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as a group already exists with the provided name. The workflow ends in a failed state.\n\nThe user will need to launch the workflow again and provide a different name.",
        "displayName": "Failure: Group Name Taken",
        "failureName": "Group Name Taken",
        "type": "failure"
      },
      "End Step - Failure 4": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as setting the group's manager failed. The workflow ends in a failed state.",
        "displayName": "Failure: Set Manager Error",
        "failureName": "Set Manager Error",
        "type": "failure"
      },
      "End Step - Failure 5": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as no organizational units were found in Active Directory. The workflow ends in a failed state.",
        "displayName": "Failure: No Organizational Units",
        "failureName": "No Organizational Units Found",
        "type": "failure"
      },
      "End Step - Failure 6": {
        "actionId": "sp:operator-failure",
        "description": "The workflow cannot continue as a command error occurred and no organizational units were found in Active Directory. The workflow ends in a failed state.",
        "displayName": "Failure: List Organizational Units Error",
        "failureName": "No Organizational Units Found",
        "type": "failure"
      },
      "End Step - Success": {
        "actionId": "sp:operator-success",
        "description": "The new group has been created and the manager has been set and notified. The workflow completed successfully.",
        "displayName": "Success: Group Created",
        "type": "success"
      },
      "Get Identity": {
        "actionId": "sp:get-identity",
        "attributes": {
          "id.$": "$.interactiveForm.formData.managerIdentity",
          "method": "GET",
          "path": "v3/identities/{{ $.id }}",
          "service": "mice"
        },
        "description": "The full identity of the manager provided in the New Group Details interactive form is retrieved.",
        "displayName": "Get Manager Identity",
        "nextStep": "Active Directory 4",
        "type": "action",
        "versionNumber": 2
      },
      "Interactive Form": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "f161243a-80dc-44c6-9ddf-9530db879574",
          "inputForForm": "{{ $.inputForForm }}",
          "inputForForm_array_locations.$": "$.activeDirectory.result.data",
          "inputForForm_array_locations_label": "$.ou",
          "inputForForm_array_locations_value": "$.distinguishedName",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "New User Details"
        },
        "description": "This interactive form allows the user to provide details about the new group.\n\nThe user will need to enter a name, group type, manager, and location.",
        "displayName": "Form: Get Group Details",
        "nextStep": "Interactive Message 2",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Form 1": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "6b87b251-70e3-46a2-98c0-8eee01cfb59a",
          "inputForForm_comment": "Managerâ€™s email not configured in Active Directory.",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Notification Details Required"
        },
        "description": "This interactive form allows the user to provide the managerâ€™s email address as their email was not configured in Active Directory.",
        "displayName": "Form: Manager Email Address",
        "nextStep": "Interactive Message 14",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Form 3": {
        "actionId": "sp:interactive-form",
        "attributes": {
          "formDefinitionId": "2db3fd5c-2201-4fa8-beba-05664dd35c8d",
          "inputForForm_requestedByWorkflow.$": "$.getIdentity.attributes.displayName",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "New Active Directory Account creation"
        },
        "description": "This interactive form explains the purpose of the workflow and what the user will need to do to complete it.",
        "displayName": "Form: Introduction",
        "nextStep": "Interactive Message 3",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>The new group is being created...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”§  Creating Group"
        },
        "description": "This interactive message notifies the user that the workflow is currently creating the new group in Active Directory.",
        "displayName": "Message: Creating Group",
        "nextStep": "Active Directory 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 10": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Sending email to {{ $.activeDirectory4.result.data.mail }}...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ“¨  Sending Manager Notification"
        },
        "description": "This interactive message notifies the user that the workflow is currently sending an email to the new group's manager.",
        "displayName": "Message: Emailing Manager (AD)",
        "nextStep": "Send Email",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 11": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Provided manager '{{ $.getIdentity.alias }}' could not be found on the target Active Directory domain.</p>\n<p>Detail Code: {{ $.activeDirectory4.error.detailCode }}</p>\n<p>Error: {{ $.activeDirectory4.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Manager Not Found"
        },
        "description": "This interactive message notifies the user that an error has occurred as the manager could not be found in Active Directory.",
        "displayName": "Message: Manager Not Found",
        "nextStep": "End Step - Failure 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 12": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Setting group manager to '{{ $.getIdentity.name }}'...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”§  Setting Manager"
        },
        "description": "This interactive message notifies the user that the workflow is currently setting the group's manager in Active Directory.",
        "displayName": "Message: Setting Group Manager",
        "nextStep": "Active Directory 5",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 13": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Set Manager Failed.</p>\n<p>{{ $.activeDirectory5.error.detailCode }}</p>\n<p>{{ $.activeDirectory5.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Setting Manager Failed"
        },
        "description": "This interactive message notifies the user that an error occurred, and setting the manager failed.",
        "displayName": "Message: Setting Manager Failed",
        "nextStep": "End Step - Failure 4",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 14": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Sending email to {{ $.interactiveForm1.formData.managerEmailAddress }}...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ“¨  Sending Manager Notification"
        },
        "description": "This interactive message notifies the user that the workflow is currently sending an email to the new group's manager.",
        "displayName": "Message: Emailing Manager (Form)",
        "nextStep": "Send Email 1",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 15": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>No organizational units were found in Active Directory.</p>\n<p>This may be due to the search base or scope defined in the action.</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "No Search Results"
        },
        "description": "This interactive message notifies the user that an error has occurred, which may be due to the selected search base or scope.",
        "displayName": "Message: Empty Results",
        "nextStep": "End Step - Failure 5",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 16": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>No organizational units were found in Active Directory due to a command failure.</p>\n<p>Detail Code: {{ $.activeDirectory.error.detailCode }}</p>\n<p>Error: {{ $.activeDirectory.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "List Organizational Units Error"
        },
        "description": "This interactive message notifies the user that no organizational units were found due to a command error.",
        "displayName": "Message: Get Organizational Units Failed",
        "nextStep": "End Step - Failure 6",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 2": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Checking whether the supplied group name is unique...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”Ž  Validating User Name"
        },
        "description": "This interactive message notifies the user that the workflow is currently looking for users with the same name as the one provided in the interactive form.",
        "displayName": "Message: Looking for Existing Group",
        "nextStep": "Active Directory 3",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 3": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Getting Organizational Units from Active Directory...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”Ž  Getting Organizational Units"
        },
        "description": "This interactive message notifies the user that the workflow is currently retrieving organizational units from Active Directory.",
        "displayName": "Message: Get Organizational Units",
        "nextStep": "Active Directory",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 4": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Group creation failed.</p>\n<p>Detail Code : {{ $.activeDirectory1.error.detailCode }}</p>\n<p>Error : {{ $.activeDirectory1.error.message.text }}</p>\n<p>&nbsp;</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Create Group Failed"
        },
        "description": "This interactive message notifies the user that an error occurred, and the new group was not created.",
        "displayName": "Message: Create Group Failed",
        "nextStep": "End Step - Failure",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 5": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Looking for the supplied manager's user account in the Active Directory domain...</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ”Ž  Locating Manager"
        },
        "description": "This interactive message notifies the user that the workflow is locating the provided managerâ€™s account in Active Directory.",
        "displayName": "Message: Locating Manager Account",
        "nextStep": "Get Identity",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 6": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>The supplied group name is available.</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "âœ…  Group Name Available"
        },
        "description": "This interactive message notifies the user that the group name is available.",
        "displayName": "Message: Group Name Available",
        "nextStep": "Interactive Message 5",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 7": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "INFO",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p><strong>Name:&nbsp;</strong>{{ $.interactiveForm.formData.name }}</p>\n<p><strong>Type: </strong>{{ $.interactiveForm.formData.type }}</p>\n<p><strong>Manager: </strong>{{ $.activeDirectory4.result.data.sAMAccountName }}</p>\n<p><strong>Location: </strong>CN={{ $.interactiveForm.formData.name }},{{ $.interactiveForm.formData.organizationalUnit }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "ðŸ“‹  New Group Details"
        },
        "description": "This interactive message displays the new groupâ€™s details to the user.",
        "displayName": "Message: Display New Group",
        "nextStep": "End Step - Success",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 8": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>No groups were found in Active Directory due to a command failure.</p>\n<p>Detail Code: {{ $.activeDirectory3.error.detailCode }}</p>\n<p>Error: {{ $.activeDirectory3.error.message.text }}</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Find Duplicate Groups Error"
        },
        "description": "This interactive message notifies the user that the privileged action gateway failed to search for groups.",
        "displayName": "Message: Find Duplicate Groups Error",
        "nextStep": "End Step - Failure 2",
        "type": "action",
        "versionNumber": 1
      },
      "Interactive Message 9": {
        "actionId": "sp:interactive-message",
        "attributes": {
          "category": "ERROR",
          "interactiveProcessId.$": "$.trigger.interactiveProcessId",
          "message": "<p>Found an existing group named '{{ $.interactiveForm.formData.name }}'.</p>\n<p>Please launch the workflow again &amp; supply a different name.</p>",
          "ownerId.$": "$.trigger.launchedBy.id",
          "title": "Group Name Taken"
        },
        "description": "This interactive message notifies the user that an error has occurred as the provided group name is already taken.\n\nThe user will need to run the workflow again and provide a different name.",
        "displayName": "Message: Group Name Taken",
        "nextStep": "End Step - Failure 3",
        "type": "action",
        "versionNumber": 1
      },
      "Send Email": {
        "actionId": "sp:send-email",
        "attributes": {
          "body": "<div>\n<div>You have been assigned as the manager of a new group.</div>\n<div>&nbsp;</div>\n<div>Name: {{ $.interactiveForm.formData.name }}</div>\n<div>&nbsp;</div>\n<div>Type: {{ $.interactiveForm.formData.type }}</div>\n<div>&nbsp;</div>\n<div>Location: CN={{ $.interactiveForm.formData.name }},{{ $.interactiveForm.formData.organizationalUnit }}</div>\n</div>",
          "context": null,
          "from": null,
          "method": "POST",
          "path": "notification/send-notification",
          "recipientEmailList.$": "$.activeDirectory4.result.data.mail",
          "replyTo": null,
          "service": "hermes",
          "subject": "New Group Created",
          "useInternalClient": true
        },
        "description": "An email is sent to the groupâ€™s manager notifying them they have been assigned as the manager of the new group. The email also contains the new groupâ€™s details.",
        "displayName": "Send Manager Email (AD)",
        "nextStep": "Interactive Message 7",
        "type": "action",
        "versionNumber": 2
      },
      "Send Email 1": {
        "actionId": "sp:send-email",
        "attributes": {
          "body": "<div>You have been assigned as the manager of a new group.</div>\n<div>&nbsp;</div>\n<div>Name: {{ $.interactiveForm.formData.name }}</div>\n<div>&nbsp;</div>\n<div>Type: {{ $.interactiveForm.formData.type }}</div>\n<div>&nbsp;</div>\n<div>Location: CN={{ $.interactiveForm.formData.name }},{{ $.interactiveForm.formData.organizationalUnit }}</div>",
          "context": null,
          "from": null,
          "method": "POST",
          "path": "notification/send-notification",
          "recipientEmailList.$": "$.interactiveForm1.formData.managerEmailAddress",
          "replyTo": null,
          "service": "hermes",
          "subject": "New Group Created",
          "useInternalClient": true
        },
        "description": "An email is sent to the groupâ€™s manager notifying them they have been assigned as the manager of the new group. The email also contains the new groupâ€™s details.",
        "displayName": "Send Manager Email (Form)",
        "nextStep": "Interactive Message 7",
        "type": "action",
        "versionNumber": 2
      },
      "Verify Data Type 5": {
        "actionId": "sp:compare-unary",
        "choiceList": [
          {
            "comparator": "IsNull",
            "nextStep": "Interactive Form 1",
            "variableA.$": "$.activeDirectory4.result.data.mail"
          }
        ],
        "defaultStep": "Interactive Message 10",
        "description": "The managerâ€™s Active Directory account is evaluated to determine if their email address is empty. If their email address is not configured, it evaluates to True, otherwise False.",
        "displayName": "Is Manager Email Empty?",
        "type": "choice"
      }
    }
  },
  "enabled": false,
  "creator": {
    "type": "IDENTITY",
    "id": "01e5dd6aee9945f89dd5544f4f683f74",
    "name": "800761288"
  },
  "owner": {
    "type": "IDENTITY",
    "id": "01e5dd6aee9945f89dd5544f4f683f74",
    "name": "800761288"
  },
  "trigger": {
    "type": "EVENT",
    "attributes": {
      "filter.$": "$[?(@.workflowId == '510a8503-8269-405c-9f58-e3cd457970b8')]",
      "id": "idn:interactive-process-launched"
    }
  }
}